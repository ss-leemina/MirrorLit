<div class="article">
  <button>
    <a href="/articles">목록 보기</a>
  </button>
  <div class="meta">
    <%= article.press %> ·
      <%= new Date(article.created_at).toLocaleString('ko-KR') %>
  </div>

  <h1>
    <%= article.title %>
  </h1>

  <div class="author">
    <%= article.author %> 기자
  </div>

  <hr>

  <div class="content">
    <% if (article.articleImage && article.articleImage.image_url) { %>
      <img src="<%= article.articleImage.image_url %>" alt="대표 이미지">
      <% } %>
        <p>
          <%= article.content %>
        </p>
  </div>

  <form class="factCheck" method="POST" action="/articles/<%= article.article_id %>/factcheck">
    <button class="factCheck-Yes" type="submit">팩트다</button>
    <button class="factCheck-No" type="submit">아니다</button>
  </form>

  <hr>

  <div>
    <form method="POST" action="/comments">
      <h2>댓글</h2>
      <input type="hidden" name="article_id" value="<%= article.article_id %>">
      <input type="text" name="source" placeholder="출처" required> <br>
      <textarea name="content" placeholder="댓글을 입력하세요." required></textarea>
      <button type="submit">작성</button>
    </form>
  </div>

  <% if (!comments || comments.length===0) { %>
    <p>아직 댓글이 없습니다.</p>
    <% } else { %>
      <% comments.forEach(comment=> { %>
        <div>
          <hr>
          <p>출처 : <%= comment.source %>
          </p>
          <%= comment.content %><br>
            <small>
              <%= new Date(comment.created_at).toLocaleString('ko-KR') %>
            </small>

            <!-- 추천 버튼 (👍) -->
            <form method="POST"
              action="/articles/<%= article.article_id %>/comments/<%= comment.comment_id %>/reaction">
              <input type="hidden" name="reaction_type" value="like">
              <button type="submit">👍 추천</button>
            </form>

            <!-- 비추천 버튼 (👎) -->
            <form method="POST"
              action="/articles/<%= article.article_id %>/comments/<%= comment.comment_id %>/reaction">
              <input type="hidden" name="reaction_type" value="dislike">
              <button type="submit">👎 비추천</button>
            </form>

            <!-- 삭제 버튼 -->
            <form method="POST" action="/comments/<%= comment.comment_id %>/delete">
              <input type="hidden" name="article_id" value="<%= article.article_id %>">
              <button type="submit">삭제</button>
            </form>
        </div>
        <% }) %>
          <% } %>
</div>